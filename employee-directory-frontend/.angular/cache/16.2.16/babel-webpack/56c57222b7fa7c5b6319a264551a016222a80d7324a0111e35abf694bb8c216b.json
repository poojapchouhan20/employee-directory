{"ast":null,"code":"import { EmployeeService } from '../../services/employee.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { NotificationService } from '../../services/notification.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/employee.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../services/notification.service\";\nimport * as i5 from \"@angular/common\";\nfunction EmployeeFormComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"div\", 4);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeeFormComponent_form_5_div_3_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"First name is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeeFormComponent_form_5_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, EmployeeFormComponent_form_5_div_3_small_1_Template, 2, 0, \"small\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.firstName == null ? null : ctx_r2.firstName.errors == null ? null : ctx_r2.firstName.errors[\"required\"]);\n  }\n}\nfunction EmployeeFormComponent_form_5_div_6_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Last name is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeeFormComponent_form_5_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, EmployeeFormComponent_form_5_div_6_small_1_Template, 2, 0, \"small\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.lastName == null ? null : ctx_r3.lastName.errors == null ? null : ctx_r3.lastName.errors[\"required\"]);\n  }\n}\nfunction EmployeeFormComponent_form_5_div_9_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Email is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeeFormComponent_form_5_div_9_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Invalid email format.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeeFormComponent_form_5_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, EmployeeFormComponent_form_5_div_9_small_1_Template, 2, 0, \"small\", 14);\n    i0.ɵɵtemplate(2, EmployeeFormComponent_form_5_div_9_small_2_Template, 2, 0, \"small\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.email == null ? null : ctx_r4.email.errors == null ? null : ctx_r4.email.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.email == null ? null : ctx_r4.email.errors == null ? null : ctx_r4.email.errors[\"email\"]);\n  }\n}\nfunction EmployeeFormComponent_form_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function EmployeeFormComponent_form_5_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onSubmit());\n    });\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelement(2, \"input\", 7);\n    i0.ɵɵtemplate(3, EmployeeFormComponent_form_5_div_3_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 6);\n    i0.ɵɵelement(5, \"input\", 9);\n    i0.ɵɵtemplate(6, EmployeeFormComponent_form_5_div_6_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 6);\n    i0.ɵɵelement(8, \"input\", 10);\n    i0.ɵɵtemplate(9, EmployeeFormComponent_form_5_div_9_Template, 3, 2, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 11);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function EmployeeFormComponent_form_5_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onCancel());\n    });\n    i0.ɵɵtext(13, \"Cancel\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.employeeForm);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.firstName == null ? null : ctx_r1.firstName.touched) && (ctx_r1.firstName == null ? null : ctx_r1.firstName.invalid));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.lastName == null ? null : ctx_r1.lastName.touched) && (ctx_r1.lastName == null ? null : ctx_r1.lastName.invalid));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.email == null ? null : ctx_r1.email.touched) && (ctx_r1.email == null ? null : ctx_r1.email.invalid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.employeeForm.invalid || ctx_r1.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isEditMode ? \"Update\" : \"Add\", \" Employee \");\n  }\n}\nlet EmployeeFormComponent = /*#__PURE__*/(() => {\n  class EmployeeFormComponent {\n    constructor(fb, employeeService, router, route, notificationService) {\n      this.fb = fb;\n      this.employeeService = employeeService;\n      this.router = router;\n      this.route = route;\n      this.notificationService = notificationService;\n      this.isEditMode = false;\n      this.formSubmitted = false;\n      this.isLoading = false;\n    }\n    ngOnInit() {\n      this.employeeId = Number(this.route.snapshot.paramMap.get('id'));\n      this.isEditMode = !!this.employeeId;\n      this.employeeForm = this.fb.group({\n        firstName: ['', Validators.required],\n        lastName: ['', Validators.required],\n        email: ['', [Validators.required, Validators.email]]\n      });\n      if (this.isEditMode) {\n        this.isLoading = true;\n        this.employeeService.getEmployee(this.employeeId).subscribe(employee => {\n          this.employeeForm.patchValue(employee);\n          this.isLoading = false;\n        }, () => {\n          this.notificationService.error('Failed to load employee data');\n          this.isLoading = false;\n        });\n      }\n    }\n    onSubmit() {\n      if (this.employeeForm.invalid) {\n        return;\n      }\n      this.isLoading = true;\n      const employee = this.isEditMode ? {\n        id: this.employeeId,\n        ...this.employeeForm.value\n      } : {\n        ...this.employeeForm.value\n      };\n      const request = this.isEditMode ? this.employeeService.updateEmployee(this.employeeId, employee) : this.employeeService.addEmployee(employee);\n      request.subscribe({\n        next: () => {\n          const msg = this.isEditMode ? 'Employee updated successfully' : 'Employee added successfully';\n          this.notificationService.success(msg);\n          this.formSubmitted = true;\n          this.isLoading = false;\n          this.router.navigate(['/employees']);\n        },\n        error: () => {\n          this.notificationService.error(this.isEditMode ? 'Failed to update employee' : 'Failed to add employee');\n          this.isLoading = false;\n        }\n      });\n    }\n    onCancel() {\n      this.router.navigate(['/employees']);\n    }\n    canDeactivate() {\n      if (this.employeeForm.dirty && !this.formSubmitted) {\n        return confirm('You have unsaved changes. Do you really want to leave?');\n      }\n      return true;\n    }\n    get firstName() {\n      return this.employeeForm.get('firstName');\n    }\n    get lastName() {\n      return this.employeeForm.get('lastName');\n    }\n    get email() {\n      return this.employeeForm.get('email');\n    }\n    static {\n      this.ɵfac = function EmployeeFormComponent_Factory(t) {\n        return new (t || EmployeeFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.EmployeeService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.NotificationService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EmployeeFormComponent,\n        selectors: [[\"app-employee-form\"]],\n        decls: 6,\n        vars: 3,\n        consts: [[1, \"container\", \"mt-4\"], [\"class\", \"d-flex justify-content-center my-3\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\", \"my-3\"], [\"role\", \"status\", 1, \"spinner-border\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\", \"w-25\"], [\"type\", \"text\", \"formControlName\", \"firstName\", \"placeholder\", \"First Name\", \"id\", \"firstName\", 1, \"form-control\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"lastName\", \"placeholder\", \"Last Name\", \"id\", \"lastName\", 1, \"form-control\"], [\"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"Email\", \"id\", \"email\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"ms-2\", 3, \"click\"], [1, \"text-danger\"], [4, \"ngIf\"]],\n        template: function EmployeeFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\");\n            i0.ɵɵtext(2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(3, \"hr\");\n            i0.ɵɵtemplate(4, EmployeeFormComponent_div_4_Template, 2, 0, \"div\", 1);\n            i0.ɵɵtemplate(5, EmployeeFormComponent_form_5_Template, 14, 6, \"form\", 2);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\"\", ctx.isEditMode ? \"Update\" : \"Add\", \" Employee\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n          }\n        },\n        dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName]\n      });\n    }\n  }\n  return EmployeeFormComponent;\n})();\nexport { EmployeeFormComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}