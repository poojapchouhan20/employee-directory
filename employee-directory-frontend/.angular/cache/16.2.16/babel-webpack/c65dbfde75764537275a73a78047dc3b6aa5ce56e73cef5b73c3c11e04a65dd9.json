{"ast":null,"code":"import { EmployeeService } from '../../services/employee.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/employee.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"ngx-toastr\";\nfunction EmployeeFormComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" First name is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeeFormComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" Last name is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeeFormComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" Enter a valid email. \");\n    i0.ɵɵelementEnd();\n  }\n}\nlet EmployeeFormComponent = /*#__PURE__*/(() => {\n  class EmployeeFormComponent {\n    constructor(fb, employeeService, router, route, toastr) {\n      this.fb = fb;\n      this.employeeService = employeeService;\n      this.router = router;\n      this.route = route;\n      this.toastr = toastr;\n      this.isEditMode = false;\n      this.formSubmitted = false;\n    }\n    ngOnInit() {\n      this.employeeId = Number(this.route.snapshot.paramMap.get('id'));\n      this.isEditMode = !!this.employeeId;\n      this.employeeForm = this.fb.group({\n        firstName: ['', Validators.required],\n        lastName: ['', Validators.required],\n        email: ['', [Validators.required, Validators.email]]\n      });\n      if (this.isEditMode) {\n        this.employeeService.getEmployee(this.employeeId).subscribe(employee => {\n          this.employeeForm.patchValue(employee);\n        });\n      }\n    }\n    onSubmit() {\n      if (this.employeeForm.invalid) {\n        return;\n      }\n      let employee;\n      if (this.isEditMode) {\n        employee = {\n          id: this.employeeId,\n          ...this.employeeForm.value\n        };\n      } else {\n        employee = {\n          ...this.employeeForm.value // NO id for new employee\n        };\n      }\n\n      if (this.isEditMode) {\n        this.employeeService.updateEmployee(this.employeeId, employee).subscribe(() => {\n          this.toastr.success('Employee updated successfully');\n          this.formSubmitted = true;\n          this.router.navigate(['/employees']);\n        }, () => {\n          this.toastr.error('Failed to update employee');\n        });\n      } else {\n        this.employeeService.addEmployee(employee).subscribe(() => {\n          this.toastr.success('Employee added successfully');\n          this.formSubmitted = true;\n          this.employeeForm.reset();\n          this.router.navigate(['/employees']);\n        }, () => {\n          this.toastr.error('Failed to add employee');\n        });\n      }\n    }\n    onCancel() {\n      this.router.navigate(['/employees']);\n    }\n    canDeactivate() {\n      if (this.employeeForm.dirty && !this.formSubmitted) {\n        return confirm('You have unsaved changes. Do you really want to leave?');\n      }\n      return true;\n    }\n    static {\n      this.ɵfac = function EmployeeFormComponent_Factory(t) {\n        return new (t || EmployeeFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.EmployeeService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.ToastrService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EmployeeFormComponent,\n        selectors: [[\"app-employee-form\"]],\n        decls: 18,\n        vars: 7,\n        consts: [[1, \"container\", \"mt-4\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\", \"w-25\"], [\"type\", \"text\", \"formControlName\", \"firstName\", \"placeholder\", \"First Name\", 1, \"form-control\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"lastName\", \"placeholder\", \"Last Name\", 1, \"form-control\"], [\"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"Email\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-info\", \"col-2\", \"me-2\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"col-2\", 3, \"click\"], [1, \"text-danger\"]],\n        template: function EmployeeFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\");\n            i0.ɵɵtext(2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(3, \"hr\");\n            i0.ɵɵelementStart(4, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function EmployeeFormComponent_Template_form_ngSubmit_4_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(5, \"div\", 2);\n            i0.ɵɵelement(6, \"input\", 3);\n            i0.ɵɵtemplate(7, EmployeeFormComponent_div_7_Template, 2, 0, \"div\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 2);\n            i0.ɵɵelement(9, \"input\", 5);\n            i0.ɵɵtemplate(10, EmployeeFormComponent_div_10_Template, 2, 0, \"div\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"div\", 2);\n            i0.ɵɵelement(12, \"input\", 6);\n            i0.ɵɵtemplate(13, EmployeeFormComponent_div_13_Template, 2, 0, \"div\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"button\", 7);\n            i0.ɵɵtext(15);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function EmployeeFormComponent_Template_button_click_16_listener() {\n              return ctx.onCancel();\n            });\n            i0.ɵɵtext(17, \"Cancel\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            let tmp_2_0;\n            let tmp_3_0;\n            let tmp_4_0;\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\"\", ctx.isEditMode ? \"Update\" : \"Add\", \" Employee\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.employeeForm);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.employeeForm.get(\"firstName\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx.employeeForm.get(\"firstName\")) == null ? null : tmp_2_0.invalid));\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.employeeForm.get(\"lastName\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx.employeeForm.get(\"lastName\")) == null ? null : tmp_3_0.invalid));\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.employeeForm.get(\"email\")) == null ? null : tmp_4_0.touched) && ((tmp_4_0 = ctx.employeeForm.get(\"email\")) == null ? null : tmp_4_0.invalid));\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"disabled\", ctx.employeeForm.invalid);\n            i0.ɵɵadvance(1);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Update\" : \"Save\", \" \");\n          }\n        }\n      });\n    }\n  }\n  return EmployeeFormComponent;\n})();\nexport { EmployeeFormComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}